<p>Hi there,</p><p>Today we switch to OpenVPN 2.6 including deferred authentication which we know some people have been waiting for.  The routing subsystem received a refactor to integrate default gateway switching into the actual routing code.</p><p>Suricata was finally updated to a newer release since the Netmap (IPS) stall bug inside their code had been found and fixed while we were still using an older code base that did not have the error.</p><p>Please also note that OpenVPN does no longer support the XOR feature due to FreeBSD ports blocking these types of out-of-project contributions and OpenVPN itself was never interested in supporting it natively.  We have been keeping this alive since 2015, but several alternatives exist now that were not available back then.</p><p>Here are the full patch notes:</p><p><ul><li>system: restructure routing to carry out default gateway switching and address family specific reconfig</li><li>system: prevent PHP session garbage collection from running early (contributed by lin-xianming)</li><li>system: finish simplifying plugins_run()</li><li>firewall: add missing scrub rules in dependency check for alias use</li><li>firewall: usability improvements and cleanups in scheduler pages (contributed by kuya1284)</li><li>interfaces: ensure single PPP netgraph node has the proper name</li><li>interfaces: reject invalid self-assignments in VLAN parent</li><li>interfaces: migrate trace route page to MVC/API</li><li>interfaces: migrate port probe page to MVC/API</li><li>interfaces: remove indirection in PPP ports handling</li><li>interfaces: exclude a few cases from PPPoEv6 negotiation</li><li>reporting: fix incorrect interface index in NetFlow init (contributed by Nicolas Thumann)</li><li>dhcp: restart radvd on config changes, otherwise keep SIGHUP</li><li>dhcp: when cleaning up static leases do not remove entries where only a MAC address is set</li><li>firmware: update size requirements for major upgrades from command line</li><li>firmware: embed build metadata into package annotations for use in runtime remote queries</li><li>firmware: fix execution of version queries when not possible</li><li>firmware: revoke 22.7 fingerprint</li><li>openvpn: fix two widget display issues</li><li>openvpn: use CARP INIT state the same way as BACKUP state for client start/stop</li><li>openvpn: enable deferred authentication (sponsored by m.a.x. it)</li><li>unbound: minor improvements to handle "Dot" endpoints ambiguity</li><li>web proxy: allow more signs for username and password (contributed by Bi0T1N)</li><li>mvc: change Phalcon logging to omit type and date</li><li>mvc: add strict option to NetworkField</li><li>ui: prevent crashing out when endpoint does not return data for SimpleActionButton</li><li>plugins: os-ddclient 1.13[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/23.1/dns/ddclient/pkg-descr">1</a>]</li><li>plugins: os-stunnel fix for missing OpenSSL CRL functions</li><li>plugins: os-smart fix for highlighting result (contributed by Justin Horton)</li><li>ports: libxml 2.10.4[<a target="_blank" href="http://www.xmlsoft.org/news.html">2</a>]</li><li>ports: openvpn 2.6.3[<a target="_blank" href="https://community.openvpn.net/openvpn/wiki/ChangesInOpenvpn26#Changesin2.6.3">3</a>]</li><li>ports: sqlite 3.41.2[<a target="_blank" href="https://sqlite.org/releaselog/3_41_2.html">4</a>]</li><li>ports: suricata 6.0.11[<a target="_blank" href="https://suricata.io/2023/04/13/suricata-6-0-11-released/">5</a>]</li><li>ports: syslog-ng 4.1.1[<a target="_blank" href="https://github.com/syslog-ng/syslog-ng/releases/tag/syslog-ng-4.1.1">6</a>]</li></ul></p><p>A hotfix release was issued as 23.1.7_3:</p><p><ul><li>system: fix a typo in monitor script preventing filter/routes reconfiguration</li><li>system: improve monitor alarm situation by not reloading monitors</li><li>openvpn: force the interface down before reconfiguration to work around a probable regression</li></ul></p><p><br>Stay safe,<br> Your OPNsense team</p>