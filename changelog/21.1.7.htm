<p>Hello, hello!</p><p>Today we move to Phalcon version 4 along with new FreeBSD security advisories and fixes for firewall live log as well as new features such as shell timeout and TLS remote syslog.</p><p>Here are the full patch notes:</p><p><ul><li>system: add shell inactivity timeout feature for csh/tcsh</li><li>system: add Syslog-ng TLS transport options</li><li>system: remove unrelated service restarts from filter_configure_xmlrpc()</li><li>system: rotate interface statistics widget (contributed by FingerlessGloves)</li><li>system: delete previous route when changed</li><li>system: make web GUI restart action usable in cron jobs (contributed by Frank Wall)</li><li>interfaces: interface_configure() checks for enabled already</li><li>interfaces: system match for primary address only works with compressed IPv6</li><li>interfaces: disable legacy CSRF output buffering when downloading a packet capture</li><li>interfaces: execute OpenVPN device creation earlier during boot</li><li>firewall: change live log address/port group matcher to correctly flip logic</li><li>firewall: explicit default for filter rule association in NAT port forwards</li><li>firewall: prevent controls overlap in live log (contributed by kulikov-a)</li><li>firewall: let live log use the newly provided rule log label instead of guessing it</li><li>firewall: calculate wildcard netmasks in aliases</li><li>captive portal: fix GUI drop session issue</li><li>dhcp: support ignore-client-uids in DHCPv4 (contributed by Kacper Why)</li><li>firmware: push automatic flags to firmware frontend</li><li>firmware: show update pending hint in system widget</li><li>firmware: allow manual development override on business subscription</li><li>intrusion detection: add YAML tag to custom.yaml.sample</li><li>openvpn: return "result" instead of "status" in export</li><li>unbound: honour space as "domainsearchlist" separator</li><li>lang: updated available translations</li><li>mvc: migrated framework to Phalcon 4</li><li>mvc: return UUID in ApiMutableModelControllerBase::validateAndSave() if applicable</li><li>rc: unconditionally configure routing on rc.syshook start facility</li><li>ui: change service restart icons to fa-repeat</li><li>plugins: added variants support to share plugin code over different third-party software versions</li><li>plugins: added NO_ABI marker to themes</li><li>plugins: remove the use of $main_buttons in relevant code</li><li>plugins: compatibility fixes with Phalcon 4</li><li>plugins: os-nginx 1.23[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/21.1/www/nginx/pkg-descr">1</a>]</li><li>plugins: os-wireguard 1.7[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/21.1/net/wireguard/pkg-descr">2</a>]</li><li>plugins: os-zabbix4-proxy is now a plugin variant</li><li>src: SMAP bypass[<a target="_blank" href="https://www.freebsd.org/security/advisories/FreeBSD-SA-21:11.smap.asc">3</a>]</li><li>src: missing message validation in libradius[<a target="_blank" href="https://www.freebsd.org/security/advisories/FreeBSD-SA-21:12.libradius.asc">4</a>][<a target="_blank" href="https://www.freebsd.org/security/advisories/FreeBSD-EN-21:17.libradius.asc">5</a>]</li><li>src: pms data corruption[<a target="_blank" href="https://www.freebsd.org/security/advisories/FreeBSD-EN-21:14.pms.asc">6</a>]</li><li>ports: curl 7.77.0[<a target="_blank" href="https://curl.se/changes.html#7_77_0">7</a>]</li><li>ports: isc-dhcp 4.4.2-P1[<a target="_blank" href="https://downloads.isc.org/isc/dhcp/4.4.2-P1/dhcp-4.4.2-P1-RELNOTES">8</a>]</li><li>ports: nss 3.66[<a target="_blank" href="https://firefox-source-docs.mozilla.org/security/nss/releases/nss_3_66.html">9</a>]</li><li>ports: openldap 2.4.59[<a target="_blank" href="https://www.openldap.org/software/release/changes.html">10</a>]</li><li>ports: pcre2 10.37[<a target="_blank" href="https://www.pcre.org/changelog.txt">11</a>]</li><li>ports: phalcon 4.1.2[<a target="_blank" href="https://github.com/phalcon/cphalcon/releases/tag/v4.1.2">12</a>]</li><li>ports: py-certifi 2021.5.30</li><li>ports: py-yaml 5.4.1</li><li>ports: squid 4.15[<a target="_blank" href="http://www.squid-cache.org/Versions/v4/squid-4.15-RELEASENOTES.html">13</a>]</li></ul></p><p>A hotfix release was issued as 21.1.7_1:</p><p><ul><li>mvc: rename 3 API actions to fix their compatibility with Phalcon 4</li><li>plugins: os-freeradius 1.9.13[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/21.1/net/freeradius/pkg-descr">14</a>]</li></ul></p><p><br>Stay safe,<br> Your OPNsense team</p>