<p>Hi there,</p><p>For more than 8 years now, OPNsense is driving innovation through modularising and hardening the open source firewall, with simple and reliable firmware upgrades, multi-language support, fast adoption of upstream software updates as well as clear and stable 2-Clause BSD licensing.</p><p>23.1, nicknamed "Quintessential Quail", features Unbound DNS statistics with a blocklist rewrite in Python, improved WAN SLAAC operability, firewall alias BGP ASN type support, PHP 8.1, assorted FreeBSD networking updates, MVC/API pages for packet capture/virtual IPs/IPsec connection management, IPsec configuration file migration to swanctl.conf, new sslh plugin, ddclient custom backend support (including Azure), WireGuard kernel module plugin variant as the new default plus much more.</p><p>Download links, an installation guide[<a target="_blank" href="https://docs.opnsense.org/manual/install.html">1</a>] and the checksums for the images can be found below as well.</p><p><ul><li>Europe: <a target="_blank" href="https://opnsense.c0urier.net/releases/23.1/">https://opnsense.c0urier.net/releases/23.1/</a></li><li>US East Coast: <a target="_blank" href="https://mirror.wdc1.us.leaseweb.net/opnsense/releases/23.1/">https://mirror.wdc1.us.leaseweb.net/opnsense/releases/23.1/</a></li><li>US West Coast: <a target="_blank" href="https://mirror.sfo12.us.leaseweb.net/opnsense/releases/23.1/">https://mirror.sfo12.us.leaseweb.net/opnsense/releases/23.1/</a></li><li>South America: <a target="_blank" href="http://mirror.ueb.edu.ec/opnsense/releases/23.1/">http://mirror.ueb.edu.ec/opnsense/releases/23.1/</a></li><li>East Asia: <a target="_blank" href="https://mirror.ntct.edu.tw/opnsense/releases/23.1/">https://mirror.ntct.edu.tw/opnsense/releases/23.1/</a></li><li>Full mirror list: <a target="_blank" href="https://opnsense.org/download/">https://opnsense.org/download/</a></li></ul></p><p>Here are the full patch notes against 22.7.11:</p><p><ul><li>system: replaced log_error() use with log_msg() and adjusted logging levels accordingly</li><li>system: introduced a service boot log</li><li>system: the LibreSSL flavour has been discontinued</li><li>system: simplify gateway monitoring setup code</li><li>system: add option to skip gateway monitor host route</li><li>system: populate /etc/hosts file with IPv6 addresses too</li><li>system: simplify and guard host route creation</li><li>system: merge system_staticroutes_configure() into system_routing_configure()</li><li>system: do not yield process after calling shutdown command</li><li>system: apply tunables during late boot in case a module was loaded depending on them to be set to a specific value</li><li>system: show size of ZFS ARC (adaptive replacement cache) in system widget</li><li>system: introduce support tier annotations for core and plugins[<a target="_blank" href="https://docs.opnsense.org/support.html">2</a>]</li><li>system: add cron tasks for scrubbing and trimming ZFS pools (contributed by Iain Henderson)</li><li>system: fix 6rd/6to4 gateway interface detection (contributed by Frans J Elliott)</li><li>reporting: add Unbound DNS statistics frontend including client drill-down</li><li>interfaces: heavy cleanup of the wireless device integration</li><li>interfaces: use 802.1ad protocol for stacked VLAN parent (QinQ)</li><li>interfaces: GIF and GRE now support subnet-based IPv6 configurations instead of always falling back to a point-to-point (/128) setup</li><li>interfaces: GIF and GRE now disable IPv6 on IPv4 tunnels (contributed by Maurice Walker)</li><li>interfaces: add isolated PPPoEv6 mode to selectively enable IPv6 CP negotiation and turn it off when no IPv6 mode is set</li><li>interfaces: add support for SLAAC WAN interfaces without DHCPv6 (contributed by Maurice Walker)</li><li>interfaces: register LAGG, PPP, VLAN and wireless devices as plugins</li><li>interfaces: simplified get_real_interface() function</li><li>interfaces: removed obsolete "defaultgw" files</li><li>interfaces: simplified rc.linkup script</li><li>interfaces: improve IP address cache behaviour in rc.newwanip(v6) scripts</li><li>interfaces: converted virtual IPs to MVC/API</li><li>interfaces: add MAC filtering to packet capture</li><li>interfaces: convert ARP/NDP pages to server-side searchable variant</li><li>interfaces: create null route for DHCPv6 delegated prefix</li><li>interfaces: tighten the concept of hardware interfaces and pull supported plugin devices into assignments page automatically</li><li>firewall: remove deprecated "Dynamic state reset" mechanic</li><li>firewall: invalidate port forward rule entry when no target is specified</li><li>firewall: hide deprecated source OS rule setting under advanced</li><li>firewall: add group option to prevent grouping in interfaces menu</li><li>firewall: safeguard against missing name from the alias API call</li><li>intrusion detection: keep grid to prevent widgets being removed</li><li>intrusion detection: reload grid after log drop (contributed by kulikov-a)</li><li>intrusion detection: add verbose logging mode selector</li><li>ipsec: disable charon.install_routes completely in case upstream would implement it for FreeBSD later on</li><li>ipsec: move user PSK (pre-shared key) and static PSK items to new MVC/API implementation</li><li>ipsec: migrate existing configuration from ipsec.conf to swanctl.conf</li><li>ipsec: add a new independent connections MVC/API component to manage IPsec in a layout matching swanctl.conf syntax more closely</li><li>ipsec: rewrote lease status page in MVC/API</li><li>ipsec: add configurable "unique" setting to phase 1</li><li>ipsec: missing correct phase 1 to collect "Network List" option</li><li>monit: support start timeout setting (contributed by spoutin)</li><li>openvpn: add unique daemon name to each instance</li><li>unbound: add statistics database backend</li><li>unbound: add exact domain blocking</li><li>mvc: call plugins_interfaces() optionally on service reconfigure</li><li>mvc: match UUID for multiple values (contributed by kulikov-a)</li><li>mvc: convert setBase() to an upsert operation</li><li>mvc: change default sorting to case-insensitive</li><li>mvc: add TextField tests (contributed by agh1467)</li><li>mvc: implement required getRealInterface() variant</li><li>ui: assorted improvements in bootgrid and form controls</li><li>ui: switch to pure JSON data in bootgrids</li><li>plugins: os-bind 1.25[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/23.1/dns/bind/pkg-descr">3</a>]</li><li>plugins: os-ddclient 1.11[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/23.1/dns/ddclient/pkg-descr">4</a>]</li><li>plugins: os-dyndns end of life note moves to 23.7</li><li>plugins: os-freeradius 1.9.22[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/23.1/net/freeradius/pkg-descr">5</a>]</li><li>plugins: os-frr 1.32[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/23.1/net/frr/pkg-descr">6</a>]</li><li>plugins: os-haproxy 4.0[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/23.1/net/haproxy/pkg-descr">7</a>]</li><li>plugins: os-puppet-agent 1.1[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/23.1/sysutils/puppet-agent/pkg-descr">8</a>]</li><li>plugins: os-sslh 1.0[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/23.1/net/sslh/pkg-descr">9</a>] (contributed by agh1467)</li><li>plugins: os-theme-cicada 1.32 (contributed by Team Rebellion)</li><li>plugins: os-upnp 1.5[<a target="_blank" href="https://github.com/opnsense/plugins/blob/stable/23.1/net/upnp/pkg-descr">10</a>]</li><li>plugins: os-wireguard switches to kernel module with a separate os-wireguard-go variant available for installation to keep the old behaviour</li><li>src: assorted FreeBSD 13 stable fixes for e.g. bpf, bridge, bsdinstall ifconfig, iflib, ipfw, ipsec, lagg, netmap, pf, route and vlan components</li><li>ports: php 8.1.14[<a target="_blank" href="https://www.php.net/ChangeLog-8.php#8.1.14">11</a>]</li><li>ports: sudo 1.9.12p2[<a target="_blank" href="https://www.sudo.ws/stable.html#1.9.12p2">12</a>]</li></ul></p><p>A hotfix release was issued as 23.1_6:</p><p><ul><li>system: incorrect link to CARP status page on dashboard widget</li><li>reporting: bail DNS resolve in traffic graphs when resolver is not configured</li><li>captive portal: for static MAC assignments make sure that the IP address actually changed before updating it</li><li>ipsec: missing a bracket for aggressive mode selection</li><li>ipsec: mute a spurious boot warning</li><li>ipsec: myid may be be optional</li><li>plugins: os-bind fix plugin directory path</li><li>plugins: os-ddclient minor PHP fix</li><li>plugins: os-frr allow restart via cron</li><li>plugins: os-nut wrong user for latest port</li><li>plugins: os-upnp typo in log level</li><li>plugins: os-wireguard service widget fix</li></ul></p><p>Migration notes, known issues and limitations:</p><p><ul><li>LibreSSL flavour has been discontinued.  Switch to OpenSSL flavour to proceed with the upgrade.</li><li>StrongSwan IPsec configuration now uses the preferred swanctl.conf instead of the deprecated ipsec.conf which could lead to connectivity issues in ambiguous cases.  Subtle bugs cannot be ruled out as well so please raise an issue on GitHub to be able to investigate each case.</li><li>The new IPsec connections pages and API create an independent set of connections following the design of swanctl.conf.  Legacy tunnel settings cannot be managed from the API and are not migrated.</li></ul></p><p>The public key for the 23.1 series is:</p><p><pre>-----BEGIN PUBLIC KEY-----
MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA4J0k7cPtunUYiR4vbRof
AiNTnkkByaWpjTeKneR/CBAaImUxpED5EnFprwM0mm4BX3Vqkf1KYQtRSawNxeXz
NiPT5Ykv0Vus0tYafBzIPsOCdUz/gtuJmtjih0uNvFSdwDRNE42MpX2RFeTm652H
fNE5Rxv23liLYdm3RNDFcM7tJEMs+zr01Lrn3McDv4OUACl3YTwFKS1BJGkBqpDI
gX1HsJMz934zNItrLxj6B2tDIR4oGrqowzW+1owT4+a8EoaimY48RAb8AUWezAZu
tQcGQ0wuZ8qy2WClYvrogsmAEUpfv1Y0YcSfpdxopOx4KyE0KEzAooRF95iFLu94
PODk1oPTr0N9qXn7XsLkpaufk+EpNecZSvbqrj3IWMyCLEBO60YuFpcFFI6SVJBC
i5OG7JVQaE8hu4CY50tMOO0M54umM8lPIOW8AuIH2PlmQWJ4tPb7j8HHnV1cM1Sf
Ha/EAJQlKEEyj4hbzSb6aKATv++qvh4jwgADsTsDtbCrtxrcBV7i+iLUM7DdxrPZ
QnLELdJPjyFxtClzi4Tf1svrF5K6NGd/nJQ1pLSkM64dKPA0iTiMMzjQMHnN8++G
UdhRzswRZ/BtB8ha1ZRRvnEHe+tcEtsXFZZSTgcR60lXlZzPY/0h+xfbgOApYlqq
MIMJsdvZkuxYrGQ5eL2nk0UCAwEAAQ==
-----END PUBLIC KEY-----</pre></p><p><br>Stay safe,<br> Your OPNsense team</p><p><pre>SHA256 (OPNsense-23.1-OpenSSL-dvd-amd64.iso.bz2) = f25c10113ef1ea13c031fc6102f8e6caf73a7296b12bcc287670026cab29c7c7
SHA256 (OPNsense-23.1-OpenSSL-nano-amd64.img.bz2) = 74ec824288adde409074f6855cb0110b860d0b28c33fbd6a30f12473a5e97d54
SHA256 (OPNsense-23.1-OpenSSL-serial-amd64.img.bz2) = 2b0ea23de4d09eed952f074e561d55b06b5d323bf9d68a2eae34c3118c304318
SHA256 (OPNsense-23.1-OpenSSL-vga-amd64.img.bz2) = 13b9f31651aa165862965566238eaecf66563a3b037fb7f8912a6d0440170bdb</pre></p>